<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>{% block title %}Irish Tide Times{% endblock %}</title>
		<meta name="description" content="{% block meta_description %}{{meta_description|safe|striptags}}{% endblock %}">
		<meta name="keywords" content="{% block meta_keywords %}{{meta_keywords|safe|striptags}}{% endblock %}">
		<meta name="author" content="Potato London">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="HandheldFriendly" content="True">
		<meta name="MobileOptimized" content="980">
		<meta http-equiv="cleartype" content="on">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">

		{% block extra_css %}

		{% endblock %}

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
	</head>

<body>
	{% include 'main/_navbar.html' %}

	<div id="wrap">
		<div id="main">
			{% block body %}
			BODY GOES HERE
			{% endblock body %}
		</div>
	</div>

	{% include 'main/_footer.html' %}

{% block extra_js %}
{# Need this bit for django-stripe-payments to work with built-in templates #}
<script src="//checkout.stripe.com/v2/checkout.js"></script>
<script src="{{ STATIC_URL }}js/eldarion-ajax.min.js"></script>
<script>
    $(function() {
        $('body').on("click", '.change-card, .subscribe-form button[type=submit]', function(e) {
          e.preventDefault();
          var $form = $(this).closest("form"),
              token = function(res) {
                $form.find("input[name=stripe_token]").val(res.id);
                $form.trigger("submit");
              };

          StripeCheckout.open({
            key:         $form.data("stripe-key"),
            name:        'Payment Method',
            panelLabel:  'Add Payment Method',
            token:       token
          });

          return false;
        });
    });
</script>

{% endblock %}

<!-- Latest compiled and minified JavaScript -->

</body>

</html>
